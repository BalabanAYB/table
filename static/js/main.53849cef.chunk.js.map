{"version":3,"sources":["state/tableContext.js","state/tableReducer.js","api/api.js","components/Table/TableRow/TableRow.jsx","components/Table/Table.jsx","components/Table/TableContainer.jsx","App.js","index.js","components/Table/TableContainer.module.css","components/Table/TableRow/TableRow.module.css"],"names":["TableContext","createContext","TableReducer","state","action","type","clb","news","payload","map","key","id","title","link","url","timeAgo","time_ago","domain","time","currentPage","sort","a","b","localeCompare","x","y","undefined","newsAPI","point","axios","get","TableRow","props","className","style","row","cell","href","target","Table","border","none","onClick","dispatchTable","setSort","TableContainer","useContext","tableState","useState","setNews","fetching","setFetching","newsToggle","setNewsToggle","getNewsData","response","data","useEffect","length","item","index","document","addEventListener","scrollHandler","removeEventListener","totalCount","e","documentElement","scrollHeight","scrollTop","window","innerHeight","newsTable","App","useReducer","Provider","value","ReactDOM","render","getElementById","module","exports"],"mappings":"2LAIeA,EAFMC,0B,cCFRC,EAAe,SAACC,EAAOC,GAClC,OAAQA,EAAOC,MACb,IAAK,WAEH,OADAD,EAAOE,KAAOF,EAAOE,MACd,2BACFH,GADL,IAEEI,KAAK,GAAD,mBACCJ,EAAMI,MADP,YAECH,EAAOI,QAAQC,KAAI,SAACF,GAAD,MAAW,CAC/BG,IAAKH,EAAKI,GACVC,MAAOL,EAAKK,MACZC,KAAMN,EAAKO,IACXC,QAASR,EAAKS,SACdC,OAAQV,EAAKU,OACbC,KAAMX,EAAKW,WAGfC,YAAahB,EAAMgB,YAAc,IAGrC,IAAK,QACH,OAAO,2BAAKhB,GAAZ,IAAmBI,KAAM,GAAIY,YAAa,IAE5C,IAAK,eACH,OAAO,2BACFhB,GADL,IAEEI,KAAK,YAAKJ,EAAMI,KAAKa,MAAK,SAACC,EAAGC,GAAJ,OAAWD,EAAEH,KAAOI,EAAEJ,KAAO,GAAK,QAGhE,IAAK,gBACH,OAAO,2BACFf,GADL,IAEEI,KAAK,YAAKJ,EAAMI,KAAKa,MAAK,SAACC,EAAGC,GAAJ,OAAUD,EAAET,MAAMW,cAAcD,EAAEV,aAGhE,IAAK,iBACH,OAAO,2BACFT,GADL,IAEEI,KAAK,YACAJ,EAAMI,KAAKa,MAAK,SAACI,EAAGC,GAAJ,YACJC,IAAbF,EAAEP,QAAwB,EAAIO,EAAEP,OAAOM,cAAcE,EAAER,cAK/D,QACE,OAAOd,I,0DCzCAwB,EAAU,SACbR,EAAaS,GACnB,OAAOC,IAAMC,IAAN,UAAaF,EALX,iCACE,oCAIJ,OAAqCT,EAArC,W,uCCUIY,EAdE,SAACC,GAChB,OACE,qBAAIC,UAAWC,IAAMC,IAArB,UACE,oBAAIF,UAAWC,IAAME,KAArB,SAA4BJ,EAAMjB,UAClC,oBAAIkB,UAAS,UAAKC,IAAME,KAAX,YAAmBF,IAAMtB,OAAtC,SACE,mBAAGyB,KAAML,EAAMnB,KAAMyB,OAAO,SAA5B,SACGN,EAAMpB,UAGX,oBAAIqB,UAAWC,IAAME,KAArB,SAA4BJ,EAAMf,aC6BzBsB,EAtCD,SAACP,GACb,OACE,uBAAOQ,OAAO,IAAd,SACE,kCACE,+BACE,oBACEP,UAAWC,IAAMO,KACjBC,QAAS,WACPV,EAAMW,cAAc,CAAEtC,KAAM,iBAC5B2B,EAAMY,QAAQ,SAJlB,yGASA,oBACEF,QAAS,WACPV,EAAMW,cAAc,CAAEtC,KAAM,kBAC5B2B,EAAMY,QAAQ,UAHlB,oEAQA,oBACEX,UAAWC,IAAMO,KACjBC,QAAS,WACPV,EAAMW,cAAc,CAAEtC,KAAM,mBAC5B2B,EAAMY,QAAQ,WAJlB,+CAUDZ,EAAMzB,WC4EAsC,EAtGQ,WAAO,IAAD,EACWC,qBAAW9C,GAAzC+C,EADmB,EACnBA,WAAYJ,EADO,EACPA,cADO,EAGHK,mBAAS,MAHN,mBAGpBzC,EAHoB,KAGd0C,EAHc,OAIKD,oBAAS,GAJd,mBAIpBE,EAJoB,KAIVC,EAJU,OAKHH,mBAAS,IALN,mBAKpB5B,EALoB,KAKdwB,EALc,OAMSI,oBAAS,GANlB,mBAMpBI,EANoB,KAMRC,EANQ,KAQrBC,EAAW,uCAAG,WAAOnC,EAAaiC,GAApB,eAAA/B,EAAA,sEACKM,EAAgBR,EAAaiC,GADlC,OACZG,EADY,OAElBZ,EAAc,CACZtC,KAAM,WACNG,QAAS+C,EAASC,KAClBlD,IAAK6C,GAAY,KALD,KAOV/B,EAPU,OAQX,SARW,OAUX,UAVW,OAYX,WAZW,uBASduB,EAAc,CAAEtC,KAAM,iBATR,OAWdsC,EAAc,CAAEtC,KAAM,kBAXR,OAadsC,EAAc,CAAEtC,KAAM,mBAbR,gFAAH,wDAoBjBoD,qBAAU,WACJV,EAAWxC,KAAKmD,OAClBT,EACEF,EAAWxC,KAAKE,KAAI,SAACkD,EAAMC,GAAP,OAClB,cAAC,EAAD,CACE/C,KAAM8C,EAAK9C,KAEXD,MAAO+C,EAAK/C,MACZG,QAAS4C,EAAK5C,QACdE,OAAQ0C,EAAK1C,QAHR2C,OAQXT,GAAY,KAEb,CAACJ,IAEJU,qBAAU,WAER,OADAI,SAASC,iBAAiB,SAAUC,GAC7B,WACLF,SAASG,oBAAoB,SAAUD,MAExC,CAAChB,EAAWkB,aAEfR,qBAAU,WACJP,GACFI,EAAYP,EAAW5B,YAAaiC,KAErC,CAACF,EAAUE,IAEd,IAAMW,EAAgB,SAACG,GAEnBA,EAAE5B,OAAO6B,gBAAgBC,cACtBF,EAAE5B,OAAO6B,gBAAgBE,UAAYC,OAAOC,aAC7C,KACFxB,EAAW5B,YAAc4B,EAAWkB,YAEpCd,GAAY,IAIhB,OACE,qCACE,qBACET,QAAS,WACPC,EAAc,CAAEtC,KAAM,UACtBiD,EAAYP,EAAW5B,aAAaiC,GACpCC,GAAcD,IAEhBnB,UAAWC,IAAMsC,UANnB,SAQGpB,EAAa,SAAW,SAE3B,cAAC,EAAD,yBACER,QAASA,GACLG,GAFN,IAGEJ,cAAeA,EACfpC,KAAMA,KAER,qBACEmC,QAAS,WACPC,EAAc,CAAEtC,KAAM,iBACtBuC,EAAQ,SAEVX,UAAWC,IAAMd,KALnB,8BCvESqD,EAjBH,WACV,IADgB,EAOoBC,qBAAWxE,EAN1B,CACnBK,KAAM,GACNY,YAAa,EACb8C,WAAY,KAJE,mBAOTlB,EAPS,KAOGJ,EAPH,KAQhB,OACE,qBAAKV,UAAU,MAAf,SACE,cAAC,EAAa0C,SAAd,CAAuBC,MAAO,CAAE7B,aAAYJ,iBAA5C,SACE,cAAC,EAAD,SCbRkC,IAASC,OAAO,cAAC,EAAD,IAAQjB,SAASkB,eAAe,U,kBCNhDC,EAAOC,QAAU,CAAC,KAAO,6BAA6B,UAAY,kCAAkC,KAAO,+B,kBCA3GD,EAAOC,QAAU,CAAC,IAAM,sBAAsB,KAAO,uBAAuB,GAAK,qBAAqB,MAAQ,2B","file":"static/js/main.53849cef.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\n\r\nconst TableContext = createContext();\r\n\r\nexport default TableContext;\r\n","export const TableReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"GET_NEWS\": {\r\n      action.clb && action.clb();\r\n      return {\r\n        ...state,\r\n        news: [\r\n          ...state.news,\r\n          ...action.payload.map((news) => ({\r\n            key: news.id,\r\n            title: news.title,\r\n            link: news.url,\r\n            timeAgo: news.time_ago,\r\n            domain: news.domain,\r\n            time: news.time,\r\n          })),\r\n        ],\r\n        currentPage: state.currentPage + 1,\r\n      };\r\n    }\r\n    case \"RESET\": {\r\n      return { ...state, news: [], currentPage: 1 };\r\n    }\r\n    case \"SORT_BY_TIME\": {\r\n      return {\r\n        ...state,\r\n        news: [...state.news.sort((a, b) => (a.time < b.time ? 1 : -1))],\r\n      };\r\n    }\r\n    case \"SORT_BY_TITLE\": {\r\n      return {\r\n        ...state,\r\n        news: [...state.news.sort((a, b) => a.title.localeCompare(b.title))],\r\n      };\r\n    }\r\n    case \"SORT_BY_DOMAIN\": {\r\n      return {\r\n        ...state,\r\n        news: [\r\n          ...state.news.sort((x, y) =>\r\n            x.domain === undefined ? -5 : x.domain.localeCompare(y.domain)\r\n          ),\r\n        ],\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import axios from \"axios\";\r\n\r\nconst news = \"https://api.hnpwa.com/v0/news/\";\r\nconst newest = \"https://api.hnpwa.com/v0/newest/\";\r\n\r\nexport const newsAPI = {\r\n  getNews(currentPage, point) {\r\n    return axios.get(`${point ? news : newest}${currentPage}.json`);\r\n  },\r\n};\r\n","import React from \"react\";\r\nimport style from \"./TableRow.module.css\";\r\n\r\nconst TableRow = (props) => {\r\n  return (\r\n    <tr className={style.row}>\r\n      <td className={style.cell}>{props.timeAgo}</td>\r\n      <td className={`${style.cell} ${style.title}`}>\r\n        <a href={props.link} target=\"_blank\">\r\n          {props.title}\r\n        </a>\r\n      </td>\r\n      <td className={style.cell}>{props.domain}</td>\r\n    </tr>\r\n  );\r\n};\r\n\r\nexport default TableRow;\r\n","import React from \"react\";\r\nimport style from \"./TableContainer.module.css\";\r\n\r\nconst Table = (props) => {\r\n  return (\r\n    <table border=\"1\">\r\n      <tbody>\r\n        <tr>\r\n          <th\r\n            className={style.none}\r\n            onClick={() => {\r\n              props.dispatchTable({ type: \"SORT_BY_TIME\" });\r\n              props.setSort(\"time\");\r\n            }}\r\n          >\r\n            Время добавления\r\n          </th>\r\n          <th\r\n            onClick={() => {\r\n              props.dispatchTable({ type: \"SORT_BY_TITLE\" });\r\n              props.setSort(\"title\");\r\n            }}\r\n          >\r\n            Заголовок\r\n          </th>\r\n          <th\r\n            className={style.none}\r\n            onClick={() => {\r\n              props.dispatchTable({ type: \"SORT_BY_DOMAIN\" });\r\n              props.setSort(\"domain\");\r\n            }}\r\n          >\r\n            Домен\r\n          </th>\r\n        </tr>\r\n        {props.news}\r\n      </tbody>\r\n    </table>\r\n  );\r\n};\r\n\r\nexport default Table;\r\n","import React, { useEffect, useState, useContext } from \"react\";\r\nimport TableContext from \"../../state/tableContext\";\r\nimport \"regenerator-runtime/runtime\";\r\n\r\nimport { newsAPI } from \"../../api/api\";\r\n\r\nimport style from \"./TableContainer.module.css\";\r\nimport TableRow from \"./TableRow/TableRow\";\r\nimport Table from \"./Table\";\r\nconst TableContainer = () => {\r\n  const { tableState, dispatchTable } = useContext(TableContext);\r\n\r\n  const [news, setNews] = useState(null);\r\n  const [fetching, setFetching] = useState(false);\r\n  const [sort, setSort] = useState(\"\");\r\n  const [newsToggle, setNewsToggle] = useState(false);\r\n\r\n  const getNewsData = async (currentPage, newsToggle) => {\r\n    const response = await newsAPI.getNews(currentPage, newsToggle);\r\n    dispatchTable({\r\n      type: \"GET_NEWS\",\r\n      payload: response.data,\r\n      clb: setFetching(false),\r\n    });\r\n    switch (sort) {\r\n      case \"time\":\r\n        dispatchTable({ type: \"SORT_BY_TIME\" });\r\n      case \"title\":\r\n        dispatchTable({ type: \"SORT_BY_TITLE\" });\r\n      case \"domain\":\r\n        dispatchTable({ type: \"SORT_BY_DOMAIN\" });\r\n\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tableState.news.length) {\r\n      setNews(\r\n        tableState.news.map((item, index) => (\r\n          <TableRow\r\n            link={item.link}\r\n            key={index}\r\n            title={item.title}\r\n            timeAgo={item.timeAgo}\r\n            domain={item.domain}\r\n          />\r\n        ))\r\n      );\r\n    } else {\r\n      setFetching(true);\r\n    }\r\n  }, [tableState]);\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"scroll\", scrollHandler);\r\n    return () => {\r\n      document.removeEventListener(\"scroll\", scrollHandler);\r\n    };\r\n  }, [tableState.totalCount]);\r\n\r\n  useEffect(() => {\r\n    if (fetching) {\r\n      getNewsData(tableState.currentPage, newsToggle);\r\n    }\r\n  }, [fetching, newsToggle]);\r\n\r\n  const scrollHandler = (e) => {\r\n    if (\r\n      e.target.documentElement.scrollHeight -\r\n        (e.target.documentElement.scrollTop + window.innerHeight) <\r\n        150 &&\r\n      tableState.currentPage < tableState.totalCount\r\n    ) {\r\n      setFetching(true);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        onClick={() => {\r\n          dispatchTable({ type: \"RESET\" });\r\n          getNewsData(tableState.currentPage, newsToggle ? false : true);\r\n          setNewsToggle(newsToggle ? false : true);\r\n        }}\r\n        className={style.newsTable}\r\n      >\r\n        {newsToggle ? \"Newest\" : \"News\"}\r\n      </div>\r\n      <Table\r\n        setSort={setSort}\r\n        {...tableState}\r\n        dispatchTable={dispatchTable}\r\n        news={news}\r\n      />\r\n      <div\r\n        onClick={() => {\r\n          dispatchTable({ type: \"SORT_BY_TIME\" });\r\n          setSort(\"time\");\r\n        }}\r\n        className={style.sort}\r\n      >\r\n        Sort to Time\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\n\r\nexport default TableContainer;\r\n","import React, { useReducer } from \"react\";\n\nimport TableContext from \"./state/tableContext\";\nimport { TableReducer } from \"./state/tableReducer\";\n\nimport \"./App.css\";\n\nimport TableContainer from \"./components/Table/TableContainer\";\n\nconst App = () => {\n  const initialState = {\n    news: [],\n    currentPage: 1,\n    totalCount: 12,\n  };\n\n  const [tableState, dispatchTable] = useReducer(TableReducer, initialState);\n  return (\n    <div className=\"App\">\n      <TableContext.Provider value={{ tableState, dispatchTable }}>\n        <TableContainer />\n      </TableContext.Provider>\n    </div>\n  );\n};\n\nexport default App;","import React from 'react'\nimport ReactDOM from 'react-dom';\n\nimport './index.css'\n\nimport App from './App'\n\nReactDOM.render(<App/>, document.getElementById('root'))","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sort\":\"TableContainer_sort__o41dD\",\"newsTable\":\"TableContainer_newsTable__1xVnR\",\"none\":\"TableContainer_none__3eBIE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"row\":\"TableRow_row__1yJl0\",\"cell\":\"TableRow_cell__3mHCo\",\"td\":\"TableRow_td__2oa90\",\"title\":\"TableRow_title__1oODG\"};"],"sourceRoot":""}
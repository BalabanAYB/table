(this["webpackJsonptask-table"]=this["webpackJsonptask-table"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(21),r=n.n(a),o=(n(28),n(4)),s=Object(c.createContext)(),i=n(7),l=n(2),b=function(e,t){switch(t.type){case"GET_NEWS":return t.clb&&t.clb(),Object(l.a)(Object(l.a)({},e),{},{news:[].concat(Object(i.a)(e.news),Object(i.a)(t.payload.map((function(e){return{key:e.id,title:e.title,link:e.url,timeAgo:e.time_ago,domain:e.domain,time:e.time}})))),currentPage:e.currentPage+1});case"RESET":return Object(l.a)(Object(l.a)({},e),{},{news:[],currentPage:1});case"SORT_BY_TIME":return Object(l.a)(Object(l.a)({},e),{},{news:Object(i.a)(e.news.sort((function(e,t){return e.time<t.time?1:-1})))});case"SORT_BY_TITLE":return Object(l.a)(Object(l.a)({},e),{},{news:Object(i.a)(e.news.sort((function(e,t){return e.title.localeCompare(t.title)})))});case"SORT_BY_DOMAIN":return Object(l.a)(Object(l.a)({},e),{},{news:Object(i.a)(e.news.sort((function(e,t){return void 0===e.domain?-5:e.domain.localeCompare(t.domain)})))});default:return e}},u=(n(29),n(11)),j=n.n(u),O=n(22),d=(n(12),n(23)),m=n.n(d),_=function(e,t){return m.a.get("".concat(t?"https://api.hnpwa.com/v0/news/":"https://api.hnpwa.com/v0/newest/").concat(e,".json"))},p=n(5),T=n.n(p),f=n(6),h=n.n(f),w=n(0),x=function(e){return Object(w.jsxs)("tr",{className:h.a.row,children:[Object(w.jsx)("td",{className:h.a.cell,children:e.timeAgo}),Object(w.jsx)("td",{className:"".concat(h.a.cell," ").concat(h.a.title),children:Object(w.jsx)("a",{href:e.link,target:"_blank",children:e.title})}),Object(w.jsx)("td",{className:h.a.cell,children:e.domain})]})},S=function(e){return Object(w.jsx)("table",{border:"1",children:Object(w.jsxs)("tbody",{children:[Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{className:T.a.none,onClick:function(){e.dispatchTable({type:"SORT_BY_TIME"}),e.setSort("time")},children:"\u0412\u0440\u0435\u043c\u044f \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u044f"}),Object(w.jsx)("th",{onClick:function(){e.dispatchTable({type:"SORT_BY_TITLE"}),e.setSort("title")},children:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"}),Object(w.jsx)("th",{className:T.a.none,onClick:function(){e.dispatchTable({type:"SORT_BY_DOMAIN"}),e.setSort("domain")},children:"\u0414\u043e\u043c\u0435\u043d"})]}),e.news]})})},E=function(){var e=Object(c.useContext)(s),t=e.tableState,n=e.dispatchTable,a=Object(c.useState)(null),r=Object(o.a)(a,2),i=r[0],b=r[1],u=Object(c.useState)(!1),d=Object(o.a)(u,2),m=d[0],p=d[1],f=Object(c.useState)(""),h=Object(o.a)(f,2),E=h[0],g=h[1],k=Object(c.useState)(!1),v=Object(o.a)(k,2),R=v[0],y=v[1],C=function(){var e=Object(O.a)(j.a.mark((function e(t,c){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(t,c);case 2:a=e.sent,n({type:"GET_NEWS",payload:a.data,clb:p(!1)}),e.t0=E,e.next="time"===e.t0?7:"title"===e.t0?8:"domain"===e.t0?9:10;break;case 7:n({type:"SORT_BY_TIME"});case 8:n({type:"SORT_BY_TITLE"});case 9:n({type:"SORT_BY_DOMAIN"});case 10:return e.abrupt("break",11);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){t.news.length?b(t.news.map((function(e,t){return Object(w.jsx)(x,{link:e.link,title:e.title,timeAgo:e.timeAgo,domain:e.domain},t)}))):p(!0)}),[t]),Object(c.useEffect)((function(){return document.addEventListener("scroll",N),function(){document.removeEventListener("scroll",N)}}),[t.totalCount]),Object(c.useEffect)((function(){m&&C(t.currentPage,R)}),[m,R]);var N=function(e){e.target.documentElement.scrollHeight-(e.target.documentElement.scrollTop+window.innerHeight)<150&&t.currentPage<t.totalCount&&p(!0)};return Object(w.jsxs)(w.Fragment,{children:[Object(w.jsx)("div",{onClick:function(){n({type:"RESET"}),C(t.currentPage,!R),y(!R)},className:T.a.newsTable,children:R?"Newest":"News"}),Object(w.jsx)(S,Object(l.a)(Object(l.a)({setSort:g},t),{},{dispatchTable:n,news:i})),Object(w.jsx)("div",{onClick:function(){n({type:"SORT_BY_TIME"}),g("time")},className:T.a.sort,children:"Sort to Time"})]})},g=function(){var e=Object(c.useReducer)(b,{news:[],currentPage:1,totalCount:12}),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(s.Provider,{value:{tableState:n,dispatchTable:a},children:Object(w.jsx)(E,{})})})};r.a.render(Object(w.jsx)(g,{}),document.getElementById("root"))},5:function(e,t,n){e.exports={sort:"TableContainer_sort__o41dD",newsTable:"TableContainer_newsTable__1xVnR",none:"TableContainer_none__3eBIE"}},6:function(e,t,n){e.exports={row:"TableRow_row__1yJl0",cell:"TableRow_cell__3mHCo",td:"TableRow_td__2oa90",title:"TableRow_title__1oODG"}}},[[49,1,2]]]);
//# sourceMappingURL=main.c5b36270.chunk.js.map